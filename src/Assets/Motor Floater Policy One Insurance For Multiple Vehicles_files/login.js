var googleInitiateFlag;function loadLoginHtmlLP(){$("body").append("<link href='/docs/default-source/apps/loginpopup/prod/css/popup-login-css.css?ver=22092021' type='text/css' rel='stylesheet' media='all'><div id='login_verificationEc_lp' class='login_overlayPop login_expressPop login-overlayN'><div class='login_popup'> <a class='login-close' id='login_close_lp'>Ã—</a><div class='login_content'><div class='login_expressform-block'><div class='login_otp-verification-form-lp'><h3>Verify OTP for a faster checkout experience</h3><p> Get your details auto-filled after entering the OTP sent to your registered email ID</p><div class='login_email-mobdetail'> <span id='otp_email1_lp' class='login_otp-email-edit-lp'></span> <span class='login_otp-email-input-lp'><div class='login_block-lp login_sInput otp_email_input'><label for='TxtEmailAddreg_lp'> Email ID* </label> <input id='otp-email-input-lp' type='email' class='login_email-input' autocomplete='off'></div> </span> <span id='otpEmail_lp' class='login_input-error-lp' style='margin-top: 5px;'>Please enter valid email id</span><span id='UpdatePanelloginComError_otp_lp' class='login_input-error-lp '></span><div class='btnSectn-Login' id='OTP_email_send-lp' style='margin-top: 10px;'><a class='login_bg js-otpExp'>SEND OTP</a></div></div><div class='login_otpInner login_otp-container' id='otpcontainer_lp'> <input type='hidden' id='txtOTP1-lp'> <input name='C032$TxtOTPreg_a_lp' id='TxtOTPreg_a_lp' type='tel' class='login_expotp-number-input-lp Numeric' autocomplete='off'> <input name='C032$TxtOTPreg_b_lp' id='TxtOTPreg_b_lp' type='tel' class='login_expotp-number-input-lp Numeric' autocomplete='off'> <input name='C032$TxtOTPreg_c_lp' id='TxtOTPreg_c_lp' type='tel' class='login_expotp-number-input-lp Numeric' autocomplete='off'> <input name='C032$TxtOTPreg_d_lp' id='TxtOTPreg_d_lp' type='tel' class='login_expotp-number-input-lp Numeric' autocomplete='off'> <input name='C032$TxtOTPreg_e_lp' id='TxtOTPreg_e_lp' type='tel' class='login_expotp-number-input-lp Numeric' autocomplete='off'> <input name='C032$TxtOTPreg_f_lp' id='TxtOTPreg_f_lp' type='tel' class='login_expotp-number-input-lp Numeric' autocomplete='off'><div class='resend_otp_div_lp'> <a class='resend_otp_a_lp' id='OTP_email_resend-lp'>Resend</a></div> <span id='otpSent' class='login_emlOtp'></span><span id='UpdatePanelloginComError_otp_lp' class='login_input-error-lp '></span></div><div class='btnSectn-Login'><a id='OTP_email_lp' class='login_bg js-otpExp'>VERIFY</a></div></div><div class='login_exp-email-password_lp exp-email-passwordbox'><h3>Enter the below details to login</h3><div class='login_inptMainBox'><div class='row m-0'><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 text-left m-b-2'><div class='login_block-lp login_sInput'> <label for='TxtEmailAddreg_lp'> Email* </label> <input name='TxtEmailAddreg_lp' type='text' autocomplete='off' maxlength='150' id='TxtEmailAddreg_lp'> <span id='loginEmail' class='login_input-error-lp'>Please enter valid email id</span></div></div><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 text-left m-b-2'><div class='login_block-lp login_sInput login_mar-none'> <label for='TxtPasswordreg_lp'> Password* </label> <input name='TxtPasswordreg_lp' type='password' maxlength='25' id='TxtPasswordreg_lp' data-toggle='tooltip' data-trigger='manual' data-title='Caps lock is on'><span id='password-field-lp' class='eye_pwd_icon_lp'></span> <span id='loginPassword' class='login_input-error-lp'>Please enter valid password</span></div> <a id='btnforgot_lp' class='login_js-forgotPass'>Forgot Password</a></div><div class='col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center m-b-2'><div class='btnSectn-Login'><a id='btnloginform_lp' class='login_bg js-valexlogin'>Login</a></div></div><div class='row m-0'><div class='col-xs-12 col-sm-12 col-md-12 col-lg-12'> <span id='UpdatePanelloginComError_lp' class='login_input-error-lp'></span> <span id='UpdatePanelcomError' class='login_input-error-lp'> </span></div></div></div></div><div class='clearfix'></div></div><div class='login_forgotPassBox_lp exp-email-passwordbox'><div class='login_frgtPassDiv'><div class='login_topBox text-center'><h3>Reset your password</h3><p> We will send you an email with instructions on how to reset your password.</p></div><div class='login_inputFieldsBox'><div class='row m-0'><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput'> <label for='forgotemail_lp'> Email* </label> <input type='text' name='forgotemail_lp' id='forgotemail_lp' maxlength='150'> <span class='login_input-error-lp'>Please enter valid email id</span></div></div><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput login_mar-none'> <label for='forgotdob_lp'> Date of Birth* </label> <input name='forgotdob_lp' type='text' id='forgotdob_lp' class='mPass js-requred datepicker-input' readonly> <span class='login_input-error-lp'>Select Date of Birth</span></div></div><div class='col-xs-12 col-sm-12 col-md-12 col-lg-12'><div class='btnSectn-Login'> <a id='btnforgotsubmit_lp' class='login_bg js-submit'>SUBMIT</a></div> <span class='login_errorCommFP_lp login_input-error-lp'></span></div></div></div></div><div class='login_instruBox_lp'><h4>An email with instruction on how to reset your password has been sent to <span id='forgotpassEmail_lp'></span></h4></div></div><div class='login_registerNowBox_lp'><h3>Signup</h3><div class='row m-0'><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6'><div class='row m-0'><div class='col-xs-12 col-sm-6 col-md-3 col-lg-3 p-l-0 p-r-0 m-b-2'><div class='login_block-lp login_sInput login_sSelect'> <label for='title-reg'>Title</label> <select id='regtitle_lp'><option>Mr</option><option>Mrs</option><option>M/S</option><option>Ms</option><option>Mx</option> </select></div></div><div class='col-xs-12 col-sm-6 col-md-9 col-lg-9 p-r-0 m-b-2 m-p-l-0'><div class='login_block-lp login_sInput login_mar-none'> <label for='regname_lp'> Full name* </label> <input type='text' name='regname_lp' id='regname_lp' maxlength='150'> <span class='login_input-error-lp'>Please enter valid name</span></div></div></div></div><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput login_mar-none'> <label for='regemail_lp'> Email ID* </label> <input type='text' name='regemail_lp' id='regemail_lp' maxlength='150'> <span class='login_input-error-lp'>Please enter valid email id</span></div></div></div><div class='row m-0'><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput '> <label for='regmobile_lp'> Mobile No.* </label> <input type='text' class='Numeric' name='regmobile_lp' id='regmobile_lp' maxlength='10'> <span class='login_input-error-lp'>Please enter valid mobile no</span></div></div><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput login_mar-none'> <label for='regdob_lp'> Date of Birth* </label> <input name='regdob_lp' type='text' id='regdob_lp' class='mPass js-requred datepicker-input ' readonly> <span class='login_input-error-lp'>Please select date of birth</span></div></div></div><div class='row m-0'><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput login_mar-none'> <label for='regpassword_lp'> Password* </label> <input name='regpassword_lp' type='password' maxlength='25' id='regpassword_lp'> <span class='login_input-error-lp'>Please enter valid format.(e.g. Abc@123) Password</span></div></div><div class='col-xs-12 col-sm-6 col-md-6 col-lg-6 m-b-2'><div class='login_block-lp login_sInput login_mar-none'> <label for='regconfirmpassword_lp'> Confirm password* </label> <input name='regconfirmpassword_lp' type='password' maxlength='25' id='regconfirmpassword_lp'> <span class='login_input-error-lp'>Both password should match</span></div></div></div><div class='row m-0'><div class='col-xs-12 col-sm-12 col-md-12 col-lg-12 m-b-2' style='margin-top:1rem;'><ul class='login_unstyled paddEb centered regtnc'><li> <input type='checkbox' id='agreetnc_tp' class='login_styled-checkbox Checkboxs2 '> <label for='agreetnc_tp'><span>I hereby acknowledge and accept the </span><a href='/legal/terms' target='_blank' class='login_termsconditions'>terms and conditions </a></label><div class='login_block-lp block2'> <span id='tnc1_lp' class='login_errorN ng-star-inserted'> Please accept terms and conditions </span></div></li></ul></div><div class='col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center m-b-2'><div class='btnSectn-Login'> <a id='btnreguser_lp' class='register-btn'>Register</a></div> <span id='reginvalidmsg_lp' class='login_errorCommFP_lp login_input-error-lp'></span><div class='login_footer-links_lp login-footer-links register-footer-link' style='display: block !important;'><div id='loginnowdiv' class='text-center login_clikSignup'>Already have an account? <a id='btnregnowlogin_lp' class='login_regNowbtn'>Login Now</a></div></div></div><div class='col-xs-12 col-sm-12 col-md-12 col-lg-12'><div class='login_footer-links_lp login-footer-links'><div class='text-center login_clikSignup'>Already have an account? <a _ngcontent-fuv-c37='' class='login_regNowbtn'>Login Now</a></div></div></div></div></div><div class='login_footer-links_lp login-footer-links'> <a id='btnlogin_lp' class='js-loginexp'>Login with email ID</a> <a id='btnotp_lp'>Login with OTP</a> <span>OR</span> <a id='btnguest_lp'>Continue as guest</a><div class='text-center login_clikSign'> You can sign in with</div></div><div id='btngoogle_lp' class='g-signin2 text-center' style='margin: 10px auto; width: 120px;' data-theme='dark' data-onsuccess='onSignIn'></div><div class='login_footer-links_lp login-footer-links reg-footer-links_lp'><div id='registerdiv_lp' class='text-center login_clikSignup'> Don't have an account? <a id='btnreg_lp' class='login_regNowbtn'>Register Now</a></div><div id='logindiv_lp' class='text-center login_clikSignup'> Already have an account? <a id='btnreglogin_lp' class='login_regNowbtn'>Login Now</a></div></div></div></div><div class='login-overlayN-Bharti'><p>If you are an existing customer of erstwhile Bharti AXA General Insurance, please call our customer support helpline on <b>1800-103-2292</b> or write to us on <b>customersupport@icicilombard.com.</b></p></div><div class='bTBor'></div></div><div class='login-datepicker-lp'></div><div class='loader_lp' style='display: none;'><div class='innerT_lp'><div class='typing_loader_lp'>&nbsp;</div></div></div></div>")}function handleHidePasswordLP(){$("#password-field-lp").off().on("click",(function(){$(this).toggleClass("eye_pwd_icon_lp eye_slash_pwd_icon_lp");var e=$("#TxtPasswordreg_lp");"password"===e.attr("type")?e.attr("type","text"):e.attr("type","password")}))}function handleOtpInputLP(){const e=$(".login_expotp-number-input-lp");e.on({input:function(o){if(this.value.length>1){var l=this.value.trim();if(!/\d{6}/.test(l))return void resetOTPLP();o.preventDefault();const i=l.split("");e.each((function(e){$(this).val(i[e])})).eq(5).focus(),$(".login_expotp-number-input-lp").attr({maxlength:"1"})}else{const o=e.index(this);$(".login_expotp-number-input-lp").attr({maxlength:"1"}),this.value&&e.eq(o+1).focus()}},keydown:function(o){const l=e.index(this);!this.value&&"Backspace"===o.key&&l&&e.eq(l-1).focus()},keyup:function(e){fetchOtpValue()||$(".login_expotp-number-input-lp").removeAttr("maxlength")},focusout:function(e){$("#txtOTP1-lp").val(fetchOtpValue())}})}function fetchOtpValue(){var e="";return $("input.login_expotp-number-input-lp").each((function(o){e+=$(this).val()})),e}function handleNumericDataLP(){$(document).on("keydown",".Numeric",(function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||13==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault()})),$(document).on("keyup",".Numeric",(function(e){var o=$(this).val(),l=o.substr(o.length-1);/^[0-9\.]$/.test(l)||(o.length>0?$(this).val(o.substr(0,o.length-1)):$(this).val())}))}function RegShowLoaderLP(){$(".loader_lp").show()}function RegHideLoaderLP(){$(".loader_lp").hide()}function RegHideLoaderParentLP(){$(".loader").hide()}function RegShowLoaderOTPLP(){$(".loader_lp").show()}function otpFormFocusLP(){$(".login_block-lp input, .login_otp-verification-form-lp input").focus((function(){$(this).parents(".login_block-lp").addClass("focus"),$(this).parents(".login_block-lp").find("span.login_input-error-lp").hide(),$("#otpEmail_lp").css("display","none")})),$(".login_block-lp input").focusout((function(){""==$(this).val()?$(this).parents(".login_block-lp").removeClass("focus"):$(this).parents(".login_block-lp").addClass("focus")}))}function onSignIn(e){}function validateSendResendOtpLP(){$("#OTP_email_send-lp").off().on("click",(function(){RegShowLoaderLP(),validateSendResendBtnLP()?sendOTPLP():RegHideLoaderLP()})),$("#OTP_email_resend-lp").off().on("click",(function(){RegShowLoaderLP(),validateSendResendBtnLP()?(resetOTPLP(),sendOTPLP()):RegHideLoaderLP()}))}function resetOTPLP(){$("#TxtOTPreg_a_lp").val(""),$("#TxtOTPreg_b_lp").val(""),$("#TxtOTPreg_c_lp").val(""),$("#TxtOTPreg_d_lp").val(""),$("#TxtOTPreg_e_lp").val(""),$("#TxtOTPreg_f_lp").val(""),$(".login_expotp-number-input-lp").removeAttr("maxlength")}function validateSendResendBtnLP(){return flag=!0,validateEmail($("#otp-email-input-lp").val())?$("#otpEmail_lp").hide():($("#UpdatePanelloginComError_otp_lp").hide(),$("#otpEmail_lp").css("display","block"),flag=!1),flag}function validateForgotLP(){$("#btnforgotsubmit_lp").off().on("click",(function(){RegShowLoaderLP(),validateForgotbtnLP()?doForgot():RegHideLoaderLP()}))}function validateTNCLP(){$("#agreetnc_tp").on("click",(function(){$("#tnc1_lp").hide()}))}function toggleEmailLP(){$(".login_otp-email-edit-lp").on("click",(function(){$(this).hide(),$("#otpcontainer_lp").hide(),$("#OTP_email_lp").hide(),$(".login_otp-email-input-lp").show(),$("#OTP_email_send-lp").show(),$("#OTP_email_resend-lp").hide(),$("#UpdatePanelloginComError_otp_lp").hide()}))}function validateOTPLP(){$("#OTP_email_lp").off().on("click",(function(){validateOTPbtn()?(RegShowLoaderLP(),verifyOTPLP()):RegHideLoaderLP()}))}function validateRegisterLP(){$("#btnreguser_lp").off().on("click",(function(){RegShowLoaderLP(),$("#reginvalidmsg_lp").hide(),validateRegisterBtn()?doRegister():RegHideLoaderLP()}))}function validateGuestLP(){$("#btnguest_lp").off().on("click",(function(){RegShowLoaderLP(),doGuestLogin()}))}function validateLoginLP(){$("#btnloginform_lp").off().on("click",(function(){RegShowLoaderLP(),validateLoginbtnLP()?doLogin():RegHideLoaderLP()}))}function validateForgotbtnLP(){flag=!0;var e=validateEmail($("#forgotemail_lp").val()),o=$("#forgotdob_lp").val();return e?$("#forgotemail_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide():($("#forgotemail_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1),""==o?($("#forgotdob_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#forgotdob_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),flag}function validateRegisterBtn(){flag=!0;var e=$("#regname_lp").val(),o=e.match(/^[a-zA-Z0-9 ]+$/),l=validateEmail($("#regemail_lp").val()),i=$("#regmobile_lp").val(),n=i.match(/^([6-9]{1}[0-9]{9})$/),t=$("#regdob_lp").val(),a=$("#regpassword_lp").val(),r=a.match(/^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/),s=$("#regconfirmpassword_lp").val();return null==o||""==e?($("#regname_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#regname_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),l?$("#regemail_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide():($("#regemail_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1),null==n||""==i?($("#regmobile_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#regmobile_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),""==t?($("#regdob_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#regdob_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),null==r||""==a||a.lenght<8?($("#regpassword_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#regpassword_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),""==s||s!=a?($("#regconfirmpassword_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#regconfirmpassword_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),1!=$("#agreetnc_tp").is(":checked")&&(flag=!1,$("#tnc1_lp").show()),flag}function validateOTPbtn(){flag=!0;var e=$("#txtOTP1-lp").val();return(null==e||""==e||e.length<6)&&(flag=!1),0==flag&&(e.length<1&&$("#UpdatePanelloginComError_otp_lp").text("Please enter OTP"),e.length>=1&&e.length<6&&$("#UpdatePanelloginComError_otp_lp").text("Please enter Valid OTP"),$("#UpdatePanelloginComError_otp_lp").show(),RegHideLoaderLP()),1==flag&&$("#UpdatePanelloginComError_otp_lp").hide(),flag}function validateLoginbtnLP(){flag=!0;var e=validateEmail($("#TxtEmailAddreg_lp").val()),o=$("#TxtPasswordreg_lp").val();return e?$("#TxtEmailAddreg_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide():($("#TxtEmailAddreg_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1),null==o||""==o?($("#TxtPasswordreg_lp").parents(".login_block-lp").find("span.login_input-error-lp").show(),flag=!1):$("#TxtPasswordreg_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),flag}function loginFormLP(){$("#btnlogin_lp").click((function(){showLoginFormLP()})),$("#btnreglogin_lp").click((function(){showLoginFormLP()})),$("#btnregnowlogin_lp").click((function(){showLoginFormLP()}))}function registerFormLP(){$("#btnreg_lp").click((function(){showRegisterFormLP()}))}function showForgotFormLP(){$("#btnforgot_lp").click((function(){$(".login_instruBox_lp").hide(),$(".login_forgotPassBox_lp").show(),$(".login_otp-verification-form-lp").hide(),$(".login_exp-email-password_lp").hide(),$(".login_registerNowBox_lp").hide(),$("#btnotp_lp").hide(),$("#btnlogin_lp").hide(),$(".login_footer-links_lp").hide(),$("#btngoogle_lp").hide(),$("#registerdiv_lp").hide(),$(".reg-footer-links_lp").show(),$("#logindiv_lp").show()}))}function showLoginFormLP(){$("#TxtEmailAddreg_lp").val()||($("#TxtEmailAddreg_lp").val($("#otp-email-input-lp").val()),$("#otp-email-input-lp").val()?$("#TxtEmailAddreg_lp").parents(".login_block-lp").addClass("focus"):$("#TxtEmailAddreg_lp").parents(".login_block-lp").removeClass("focus")),$("#TxtEmailAddreg_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),$("#TxtPasswordreg_lp").parents(".login_block-lp").find("span.login_input-error-lp").hide(),$(".login_forgotPassBox_lp").hide(),$(".login_otp-verification-form-lp").hide(),$(".login_exp-email-password_lp").show(),$(".login_registerNowBox_lp").hide(),$("#btnotp_lp").show(),$("#btnlogin_lp").hide(),$(".login_footer-links_lp").show(),$("#btngoogle_lp").show(),$("#registerdiv_lp").show(),$("#logindiv_lp").hide(),$(".login_errorCommFP_lp").hide(),$("#otp-email-input-lp").val("")}function OTPFormLP(){$("#btnotp_lp").click((function(){showOTPFormLP()}))}function showOTPFormLP(){$("#otp-email-input-lp").val()||($("#otp-email-input-lp").val($("#TxtEmailAddreg_lp").val()),$("#TxtEmailAddreg_lp").val()?$("#otp-email-input-lp").parents(".login_block-lp").addClass("focus"):$("#otp-email-input-lp").parents(".login_block-lp").removeClass("focus")),$(".login_otp-verification-form-lp").show(),$(".login_exp-email-password_lp").hide(),$(".login_registerNowBox_lp").hide(),$("#otpcontainer_lp").hide(),$("#OTP_email_resend-lp").hide(),$(".login_forgotPassBox_lp").hide(),$("#btnlogin_lp").show(),$("#btnotp_lp").hide(),$(".login_footer-links_lp").show(),$("#btngoogle_lp").show(),$("#registerdiv_lp").show(),$("#logindiv_lp").hide(),$("#OTP_email_lp").hide(),$("#otp_email1_lp").hide(),$(".login_otp-email-input-lp").show(),$("#OTP_email_send-lp").show(),$("#UpdatePanelloginComError_otp_lp").hide(),$("#TxtEmailAddreg_lp").val("")}function showRegisterFormLP(){$(".login_otp-verification-form-lp").hide(),$(".login_exp-email-password_lp").hide(),$("#forgotPassBox_lp").hide(),$(".login_registerNowBox_lp").show(),$(".login_footer-links_lp").hide(),$("#btngoogle_lp").hide(),$("#registerdiv_lp").hide(),$("#logindiv_lp").hide(),$(".reg-footer-links_lp").show()}function addRemoveFocus(e){""==$(e).val()?$(e).parents(".login_block-lp").removeClass("focus"):$(e).parents(".login_block-lp").addClass("focus")}function showLoginPopUp(e){RegHideLoaderLP(),RegHideLoaderParentLP(),$("#ui-datepicker-div").remove();var o=JSON.parse(sessionStorage.getItem("userLoginUIData"));$("#login_verificationEc_lp").show(),googleInitiateFlag=!0,"email"==e?(null!=o&&(o.EmailId?$("#TxtEmailAddreg_lp").val(o.EmailId):o.emailId?$("#TxtEmailAddreg_lp").val(o.emailId):$("#TxtEmailAddreg_lp").val(o.email),addRemoveFocus("#TxtEmailAddreg_lp")),showLoginFormLP()):(null!=o&&(o.EmailId?$("#otp_email1_lp").val(o.EmailId):o.emailId?$("#otp_email1_lp").val(o.emailId):$("#otp_email1_lp").val(o.email),$("#otp-email-input-lp").val(o.email)),showOTPFormLP()),addDatepickerLP()}function sendOTPLP(){RegShowLoaderOTPLP();var e={Login:$("#otp-email-input-lp").val(),LoginType:"User"};corelibrary.MakePostCallForCore2("user/otp",e).then((function(e){null!=e&&(1==e.success?($("#OTP_email_send-lp").hide(),$("#otp_email1_lp").show(),$(".login_otp-email-input-lp").hide(),$("#OTP_email_resend-lp").show(),$("#otp_email1_lp").text($("#otp-email-input-lp").val()),$("#otpcontainer_lp").show(),$("#OTP_email_lp").show(),$("#UpdatePanelloginComError_otp_lp").text("OTP sent successfully"),$("#UpdatePanelloginComError_otp_lp").css("display","block")):($("#UpdatePanelloginComError_otp_lp").text(e.errorMessage),$("#UpdatePanelloginComError_otp_lp").css("display","block"))),RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function verifyOTPLP(){var e={EmailId:$("#otp-email-input-lp").val(),OTP:corelibrary.getEncryptedPassword($("#txtOTP1-lp").val())};corelibrary.MakePostCallForCore2("auth/otp",e).then((function(e){null!=e?1==e.success?processLoginResponseLP(e,!1):($("#UpdatePanelloginComError_otp_lp").text(e.errorMessage),$("#UpdatePanelloginComError_otp_lp").show(),RegHideLoaderLP()):RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function doLogin(){var e={Login:$("#TxtEmailAddreg_lp").val(),Password:corelibrary.getEncryptedPassword($("#TxtPasswordreg_lp").val()),LoginType:"User"};corelibrary.MakePostCallForCore2("auth/token",e).then((function(e){null!=e?1==e.success?processLoginResponseLP(e,!1):("login or password doesnot match"==e.errorMessage?$("#UpdatePanelloginComError_lp").text("login or password does not match"):$("#UpdatePanelloginComError_lp").text(e.errorMessage),$("#UpdatePanelloginComError_lp").show(),RegHideLoaderLP()):RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function doLogout(){this.doWebsiteLogout()}function doWebsiteLogout(){var e={Login:$("#TxtEmailAddreg_lp").val(),Password:corelibrary.getEncryptedPassword($("#TxtPasswordreg_lp").val()),LoginType:"User"};corelibrary.MakePostCallForCore2("auth/logout",e).then((function(e){null!=e&&1==e.success?(sessionStorage.removeItem("UserDetailsData"),sessionStorage.removeItem("UserLoggedInDetail"),sessionStorage.removeItem("AuthorizationToken"),sessionStorage.removeItem("TokenExpiry"),sessionStorage.removeItem("LoginType"),sessionStorage.removeItem("IsCallCenterUser"),window.location.href="/"):RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function doGuestLogin(){window.proceed_url?corelibrary.MakePostCallForCore2("auth/guest",{}).then((function(e){null!=e&&1==e.success?processLoginResponseLP(e,!0):RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()})):(RegHideLoaderLP(),$("#reginvalidmsg_lp").text("You are not a registered user, please register to continue."),$("#reginvalidmsg_lp").show(),showRegisterFormLP())}function doForgot(){var e=$("#forgotdob_lp").val().split("/"),o={EmailID:$("#forgotemail_lp").val(),DateOfBirth:e[1]+"/"+e[0]+"/"+e[2]};corelibrary.MakePostCallForCore2("user/forgot-password",o).then((function(e){null!=e&&(1==e.success?($(".login_instruBox_lp").show(),$("#forgotpassEmail_lp").text($("#forgotemail_lp").val()),$(".login_errorCommFP_lp").hide(),setTimeout((function(){showLoginFormLP()}),5e3)):($(".login_errorCommFP_lp").text(e.errorMessage),$(".login_errorCommFP_lp").css("display","block"))),RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function doRegister(){var e,o;o=(e=verifyCallCenter())?"Lombard@123456":$("#regpassword_lp").val();var l={EmailId:$("#regemail_lp").val(),UserPassword:corelibrary.getEncryptedPassword(o),UserName:$("#regname_lp").val(),DateOfBirth:$("#regdob_lp").val(),MobileNo:$("#regmobile_lp").val(),UserTitleId:getTitleId($("#regtitle_lp").val()),LoginType:"User",IsRegisterByCallCenter:e,UserTitleText:$("#regtitle_lp").val()};corelibrary.MakePostCallForCore2("user/register",l).then((function(e){null!=e?1==e.success?processLoginResponseLP(e,!1):($("#reginvalidmsg_lp").text(e.errorMessage),$("#reginvalidmsg_lp").show(),RegHideLoaderLP()):RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function doGoogleLogIn(e,o,l){var i={EmailId:e,AuthorizedCode:o,GoogleId:l};googleInitiateFlag&&corelibrary.MakePostCallForCore2("Auth/google",i).then((function(e){null!=e?1==e.success?processLoginResponseLP(e,!1):(RegHideLoaderLP(),$("#reginvalidmsg_lp").text("You are not a registered user, please register to continue."),$("#reginvalidmsg_lp").show(),showRegisterFormLP()):RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}function processLoginResponseLP(e,o){sessionStorage.setItem("AuthorizationToken",e.authToken);var l="sid";if(e.sid&&(l=e.sid),sessionStorage.setItem("SID",l),sessionStorage.getItem("PolicyId")){let l=[],i=sessionStorage.getItem("PolicyId").split(",");for(let e=0;e<i.length;e++)l.push(i[e]);let n={policyId:l};corelibrary.MakePaymentTransactionCall("Payment/CreatePaymentTransaction",n).then((function(l){var i=JSON.parse(l.responseText);if(null!=i)if(1!=i.Success&&1!=i.success||null==i.RazorpayOrderId&&null==i.razorpayOrderId)RegHideLoaderLP(),$("#UpdatePanelloginComError_lp").text(i.ErrorMessage),$("#UpdatePanelloginComError_lp").show();else{l.getResponseHeader("X-Token")&&(sessionStorage.setItem("NewAuthorizationToken",l.getResponseHeader("X-Token")),sessionStorage.setItem("AuthorizationToken",l.getResponseHeader("X-Token"))),l.getResponseHeader("X-TokenExpiry")&&sessionStorage.setItem("TokenExpiry",l.getResponseHeader("X-TokenExpiry")),sessionStorage.setItem("clientId",e.clientId.toString()),sessionStorage.setItem("LoginType","User");var n={clientId:e.clientId,IPartnerUserId:e.iPartnerUserId,LastLogin:convertLastLoginFormat(e.lastLogin),UserName:e.userName,isguestuser:o?1:0};sessionStorage.setItem("UserDetailsData",JSON.stringify(n)),googleInitiateFlag=!1,window.location.href=window.location.origin+window.proceed_url+"?returl="+window.location.pathname}else RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}else if(sessionStorage.getItem("ProposalId")){for(var i=[],n=sessionStorage.getItem("ProposalId").toString().split(","),t=0;t<n.length;t++)i.push(n[t]);let l={proposalId:i};corelibrary.MakePostCallForCore2("Payment/Transaction",l).then((function(l){if(null!=l)if(1!=l.Success&&1!=l.success||null==l.paymentTransactionId&&null==l.PaymentTransactionId)RegHideLoaderLP(),$("#UpdatePanelloginComError_lp").text(l.ErrorMessage),$("#UpdatePanelloginComError_lp").show();else{l.xToken&&(sessionStorage.setItem("NewAuthorizationToken",l.xToken),sessionStorage.setItem("AuthorizationToken",l.xToken)),l.xTokenExpiry&&sessionStorage.setItem("TokenExpiry",l.xTokenExpiry),sessionStorage.setItem("clientId",e.clientId.toString()),sessionStorage.setItem("LoginType","User");var i={clientId:e.clientId,IPartnerUserId:e.iPartnerUserId,LastLogin:convertLastLoginFormat(e.lastLogin),UserName:e.userName,isguestuser:o?1:0};if(sessionStorage.setItem("UserDetailsData",JSON.stringify(i)),googleInitiateFlag=!1,-1!=window.location.pathname.search("renew")){var n=window.hb_renewal_ret_url;window.location.href=null!=n&&null!=n&&""!=n?window.location.origin+window.proceed_url+"?PaymentTransactionId="+l.paymentTransactionId+"&returl="+n:window.location.origin+window.proceed_url+"?PaymentTransactionId="+l.paymentTransactionId+"&returl="+window.location.pathname}else window.location.href=window.location.origin+window.proceed_url+"?returl="+window.location.pathname}else RegHideLoaderLP()})).catch((function(e){RegHideLoaderLP()}))}else if(e.clientId&&e.iPartnerUserId){sessionStorage.setItem("clientId",e.clientId.toString()),sessionStorage.setItem("LoginType","User");var a={clientId:e.clientId,IPartnerUserId:e.iPartnerUserId,LastLogin:convertLastLoginFormat(e.lastLogin),UserName:e.userName,isguestuser:o?1:0};sessionStorage.setItem("UserDetailsData",JSON.stringify(a)),sessionStorage.setItem("TokenExpiry",e.tokenExpiry.toString()),googleInitiateFlag=!1,window.proceed_url?window.location.href=window.location.origin+window.proceed_url:window.location.href=window.location.origin+"/manage-your-policy/dashboard-duplicate?IPartnerId="+corelibrary.getEncryptedPassword(e.iPartnerUserId)}else RegHideLoaderLP()}function convertLastLoginFormat(e){var o=new Date(e),l=("00"+o.getDate()).slice(-2)+"/"+("00"+(o.getMonth()+1)).slice(-2)+"/"+o.getFullYear()+" "+("00"+o.getHours()).slice(-2)+":"+("00"+o.getMinutes()).slice(-2)+":"+("00"+o.getSeconds()).slice(-2);return"aN/aN/NaN aN:aN:aN"!=l?l:e}function addDatepickerLP(){$.fn.datepicker&&($("#regdob_lp").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",dateFormat:"dd/mm/yy",minDate:"-100Y +1D",maxDate:"-18Y",yearRange:"-100:-18",beforeShow:function(e,o){$(".login-datepicker-lp").append($("#ui-datepicker-div"))},onSelect:function(e){e&&addRemoveFocus("#regdob_lp")}}),$("#forgotdob_lp").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",dateFormat:"dd/mm/yy",minDate:"-100Y +1D",maxDate:"-18Y",yearRange:"-100:-18",beforeShow:function(e,o){$(".login-datepicker-lp").append($("#ui-datepicker-div"))},onSelect:function(e){e&&addRemoveFocus("#forgotdob_lp")}}))}function verifyCallCenter(){var e=window.location.host;return"https://ipartnercc.icicilombard.com"==e||"https://ipartnerext.icicilombard.com"==e||"https://ipartnerccui.icicilombard.com"==e}function getTitleId(e){switch(e){case"Mr":return"1";case"Mrs":return"0";case"M/S":return"11";case"Ms":return"2";case"Mx":return"3"}}function closePopup(){$("#login_verificationEc_lp").hide(),$("#ui-datepicker-div").remove(),googleInitiateFlag=!1}function handlePopUpClose(){$(document).on("click","#login_close_lp",(function(e){closePopup()}))}function validateEmail(e){return/^(([^|\\<>/()\[\]\,;:@\"]+(\[^<>()\[\]\,;:\s@\"])*)|(\"\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^0-9<>/()[\]\.,;:\s@\"]{2,4})$/.test(e)&&/^([a-zA-Z0-9_.-])+\@(([a-zA-Z0-9-]{2,9})+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function initializeEmailInput(){$("#TxtEmailAddreg_lp, #forgotemail_lp, #regemail_lp, #otp-email-input-lp").on({keypress:function(e){var o=String.fromCharCode(e.which);if(o&&!/^[a-zA-Z0-9.@_-]*$/.test(o))return e.preventDefault(),!1}})}$(document).ready((function(){loadLoginHtmlLP(),otpFormFocusLP(),loginFormLP(),OTPFormLP(),registerFormLP(),showForgotFormLP(),handleNumericDataLP(),handleOtpInputLP(),toggleEmailLP(),validateSendResendOtpLP(),validateOTPLP(),validateLoginLP(),validateGuestLP(),validateRegisterLP(),validateTNCLP(),validateForgotLP(),handleHidePasswordLP(),handlePopUpClose(),initializeEmailInput()}));